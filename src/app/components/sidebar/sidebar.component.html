<div class="sidebar" [class.collapsed]="isCollapsed">
  <!-- Toggle Button -->
  <div class="toggle-btn" (click)="toggleSidebar()">
    <ion-icon
      [name]="isCollapsed ? 'menu' : 'close'"
      class="toggle-icon"
    ></ion-icon>
  </div>

  <!-- Menu Items -->
  <div class="menu-items">
    <a
      [routerLink]="['/home']"
      class="menu-item"
      [class.active]="isActive('/home')"
      [title]="isCollapsed ? 'Beranda' : ''"
    >
      <ion-icon name="home-outline" class="menu-icon"></ion-icon>
      <span class="menu-text">Beranda</span>
    </a>

    <a
      [routerLink]="['/beban-kerja']"
      class="menu-item"
      [class.active]="isActive('/beban-kerja')"
      [title]="isCollapsed ? 'Beban Kerja' : ''"
    >
      <ion-icon name="analytics-outline" class="menu-icon"></ion-icon>
      <span class="menu-text">Beban Kerja</span>
    </a>
  <a
      [routerLink]="['/tingkat-kantuk']"
      class="menu-item"
      [class.active]="isActive('/tingkat-kantuk')"
      [title]="isCollapsed ? 'Tingkat Kantuk' : ''"
    >
      <ion-icon name="stats-chart-outline" class="menu-icon"></ion-icon>
      <span class="menu-text">Tingkat Kantuk</span>
    </a>
    <a
      [routerLink]="['/waktu-reaksi']"
      class="menu-item"
      [class.active]="isActive('/waktu-reaksi')"
      [title]="isCollapsed ? 'Waktu Reaksi' : ''"
    >
      <ion-icon name="timer-outline" class="menu-icon"></ion-icon>
      <span class="menu-text">Waktu Reaksi</span>
    </a>
  </div>


  <div class="spacer"></div>

  <div class="menu-items bottom">
    <a
      (click)="logout()"
      class="menu-item logout-item"
      [title]="isCollapsed ? 'Logout' : ''"
    >
      <ion-icon name="log-out-outline" class="menu-icon"></ion-icon>
      <span class="menu-text">Logout</span>
    </a>
  </div>

  <!-- User Profile Section -->
  <div class="profile-section bottom-profile" *ngIf="user">
    <div class="profile-avatar-container">
      <div class="profile-avatar" [title]="user.displayName || 'User'">
        <img
          *ngIf="user.photoURL"
          [src]="user.photoURL"
          alt="Profile"
          class="avatar-img"
          referrerpolicy="no-referrer"
          (error)="handleImageError($event)"
        />
        <div *ngIf="!user.photoURL" class="avatar-placeholder">
          {{ (user.displayName || "U")[0] | uppercase }}
        </div>
      </div>
      <span class="online-indicator"></span>
    </div>
    <div class="profile-details" *ngIf="!isCollapsed">
      <div class="profile-name">{{ user.displayName || "User" }}</div>
      <div class="profile-email" [title]="user.email">
        {{ user.email || "" }}
      </div>
    </div>
  </div>
</div>
